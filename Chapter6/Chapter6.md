## 6.22

磁道数与 r(1-x)正相关 即ir(1-x)
位数与 xr正相关 即kxr
所以容量 与x(1-x)正相关，当x = 0.5的时候取到最大值

## 6.23

平均时间 = 平均寻道 + 平均旋转 + 传送时间
T<sub>Avg</sub> = 4 + (1/(15000/60))/2 * 1000 + (1/(15000/60))/800 * 1000
= 6.005ms

## 6.24

A:  T = 4 + (1/(15000/60))/2 * 1000 + (1/(15000/60))/1000 * 1000 * 4000
= 22ms
B:  T = 4000 * (4 + (1/(15000/60))/2 * 1000)
= 24000 ms = 24s

## 6.25

| 高速缓存 | S | t | s | b |
|-------|-------|-------|------|-------|
| 1 | 64 | 24 | 6 | 2 |
| 2 | 1 | 30 | 0 | 2 |
| 3 | 128 | 22 | 7 | 3 |
| 4 | 1 | 29 | 0 | 3 |
| 5 | 32 | 22 | 5 | 5 |
| 6 | 8 | 24 | 3 | 5 |

## 6.26

|高速缓存|m|C|B|E|S|t|s|b|
|-------|-------|-------|------|-------|-------|-------|-------|------|
|1|32|2048|8|1|256|21|8|3|
|2|32|2048|4|4|128|23|7|2|
|3|32|1024|2|8|64|25|6|1|
|4|32|1024|32|2|16|23|4|5|

## 6.27

A: 0x08a4 0x08a5 0x08a6 0x08a7
0x0704 0x0705 0x0706 0x0707

B: 0x1238 0x1239 0x123a 0x123b

## 6.28

A: none
B: 0x18f0 0x18f1 0x18f2 0x18f3
0x00b0 0x00b1 0x00b2 0x00b3
C: 0x0e34 0x0e35 0x0e36 0x0e37
D: 0x1bdc 0x1bdd 0x1bde 0x1bdf

## 6.29

A:
* CO 0-1
* CI 2-3
* CT 4-12
  
B:
* 未命中 未知
* 命中 未知
* 命中 0xc0

## 6.30

A: C = B * E * S = 128 B
B: 
* C0 0-1
* CI 2-4
* CT 5-12

## 6.31

A:
0b0011100011010
B:
|参数|值|
|---|---|
|CO|0x2|
|CI|0x6|
|CT|0x38|
|是否命中|是|
|返回的字节|0xeb|

## 6.32

A:
0b1011011101000
B:
|参数|值|
|---|---|
|CO|0x0|
|CI|0x2|
|CT|0xb7|
|是否命中|否|
|返回的字节|-|

## 6.33

0x1788 0x1789 0x178a 0x178b

0x16c8 0x16c9 0x16ca 0x16cb

## 6.34

dst 数组
|m|m|m|m|
|--|--|--|--|
|m|m|m|m|
|m|m|m|m|
|m|m|m|m|

src 数组
|m|m|h|m|
|--|--|--|--|
|m|h|m|h|
|m|m|h|m|
|m|h|m|h|

## 6.35

dst 数组
|m|h|h|h|
|--|--|--|--|
|m|h|h|h|
|m|h|h|h|
|m|h|h|h|

src 数组
|m|h|h|h|
|--|--|--|--|
|m|h|h|h|
|m|h|h|h|
|m|h|h|h|

## 6.36

A:  数组的总大小为1024B 高速缓冲为512B，循环中每次都是访问的高速缓存块会互相替换，不命中是100%
B:  数组大小和高速缓存相同，只有冷命中，所以为25%
C： 25%，只有冷命中
D:  不能，因为只有冷命中了，这个不能避免
E:  能，命中一次后可以读更多次

## 6.37

|函数|N = 64|N = 60|
|--|--|--|
|sumA|25%|25%|
|sumB|100%|25%|
|sumC|50%|25%|

N = 60的情况
sumB: 先从一个例子开始看，N = 60 的时候一次是跳15块，那么就是 15,30,..,255,270
总共的块数是256块，所以第一次过256这个块后，第二遍就是270%256 = 14,285%256 = 29
14%15 = 14 ,29%15 = 14,所以是放在了第一轮的前一块的位置，计算60*16B = 960B < 4KB
所以可以全部放进去，所以不命中率是25%，大致就是 15n%256%15 这个公式
sumC: 和sumB类似

## 6.38

A: 1024
B: 128
C: 12.5%

## 6.39

A: 1024
B: 256
C: 25%

## 6.40

A: 1024
B: 256
C: 25%

## 6.41

25%

## 6.42

25%

## 6.43

100%

## 6.45

```C
void transpose(int *dst, int *src, int dim){
    int i, j;
    for(i=0; i<dim; i+=B){
        for(j=0; j<dim; j+=B){
            for(int k=i; k<i+B; k++){
                for(int q=j; q<j+B; q++){
                    if(k < dim && q < dim){
                        dst[k*dim + q] = src[q*dim + k];
                    }
                }
            }
        }
    }
}


```

## 6.46

```C
void col_convert(int *G,int dim){
    int i,j;
    for(i=0; i<dim; i+=B){
        for(j=i; j<dim; j+=B){
            for(int k=i; k<i+B; k++){
                for(int q=j; q<j+B; q++){
                    if(k < dim && q < dim){
                        G[q*dim+k] = G[q*dim+k]||G[k*dim+q];
                        G[k*dim+q] = G[k*dim+q]||G[q*dim+k];
                    }
                }
            }
        }
    }
}







